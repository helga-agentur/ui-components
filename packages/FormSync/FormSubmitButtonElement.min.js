!function(){"use strict";var e=e=>{if(!e.every((e=>e.name)))throw new Error(`canReadAttribute: Every config entry must be an object with property name; you passed ${JSON.stringify(e)} instead.`);return{readAttributes(){e.forEach((e=>{const{name:t,validate:n,property:r,transform:s}=e,i=this.getAttribute(t);if("function"==typeof n&&!n(i))throw new Error(`canWatchAttribute: Attribute ${t} does not match validation rules`);const o=s||(e=>e);this[r||t]=o(i)}))}}},t=(e,t,n)=>(e.addEventListener(t,n),()=>e.removeEventListener(t,n));class n extends HTMLElement{constructor(){super(),Object.assign(this,e([{name:"data-form-selector",property:"formSelector",validate:e=>!!e},{name:"data-change-selector",property:"changeSelector"},{name:"data-changed-class-name",property:"changedClassName"}])),this.readAttributes()}connectedCallback(){this.setupSubmitListeners(),this.setupChangeListeners()}setupSubmitListeners(){this.addEventListener("click",this.submitForm.bind(this))}submitForm(e){e.preventDefault(),e.stopPropagation();(e=>{if(!(e instanceof HTMLFormElement))throw new Error(`submitForm: Pass a valid HTMLFormElement as parameter to the function; you used ${e} instead.`);const t="input[type='submit'], button[type='submit']",n=e.querySelector(t);if(!n)throw new Error(`submitForm: Original submit button with selector ${t} could not be found in form ${e}. Form cannot be submitted.`);n.click()})(document.querySelector(this.formSelector))}setupChangeListeners(){if(!this.changeSelector)return;if(!this.changedClassName)return;const e=document.querySelector(this.changeSelector);e?(this.removeInputListener=t(e,"input",this.handleChangeElementChange.bind(this)),this.removeChangeListener=t(e,"change",this.handleChangeElementChange.bind(this))):console.warn("FormSubmitButton: Element with selector %o that should be watched for changes does not exist.",this.changeSelector)}handleChangeElementChange(){this.removeChangeListener(),this.removeInputListener(),requestAnimationFrame((()=>this.classList.add(this.changedClassName)))}}window.customElements.get("form-submit-button")||window.customElements.define("form-submit-button",n)}();
